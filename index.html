<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Ù†Ø§ÙˆÙ„Ø³ØªØ§Ù† - Ù¾Ø±ÛŒÙ…ÛŒÙ… Ù¾ÙˆØ±Ù¹Ù„</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="settings.js"></script>

    <style>
        :root { --bg: #0a0e27; --card: #1a1f3a; --accent: #ff0a54; --accent2: #00d9ff; --text: #ffffff; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Noto Nastaliq Urdu', serif; background: var(--bg); color: var(--text); min-height: 100vh; line-height: 1.6; }
        .container { max-width: 500px; margin: 0 auto; padding: 15px; }
        .header { text-align: center; border-bottom: 3px solid var(--accent); border-radius: 0 0 30px 30px; margin-bottom: 25px; background: var(--card); overflow: hidden; }
        .header-cover { width: 100%; height: 200px; object-fit: cover; }
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .nav-btn { background: var(--card); border-radius: 18px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); cursor: pointer; text-align: center; }
        .nav-btn img { width: 100%; height: 120px; object-fit: cover; }
        .nav-btn h3 { padding: 12px; font-size: 1.1rem; }
        .items-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .card { background: #1a1f3a; padding: 15px 10px; border-radius: 12px; text-align: center; border: 1px solid #3a3f5a; cursor: pointer; }
        .btn-back { background: var(--accent); color: #fff; border: none; padding: 12px; width: 100%; border-radius: 10px; margin-bottom: 15px; cursor: pointer; font-family: inherit; }
        .puzzle-section { background: linear-gradient(135deg, #1a1f3a 0%, #0a0e27 100%); padding: 20px; border-radius: 20px; text-align: center; border: 1px solid var(--accent2); }
        .timer-circle { width: 80px; height: 80px; border-radius: 50%; border: 4px solid var(--accent); line-height: 72px; font-size: 28px; margin: 0 auto 15px; color: var(--accent); }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; z-index: 1000; padding: 20px; }
        .modal.active { display: flex; }
        .modal-box { background: #1a1f3a; padding: 25px; border-radius: 20px; width: 100%; max-width: 350px; text-align: center; border: 2px solid var(--accent); }
    </style>
</head>
<body>

    <div id="home-screen" class="container">
        <header class="header">
            <img src="https://drive.google.com/thumbnail?id=18SlPABsEdm_mndblVL9xHUwCARh6ye7x&sz=w800" class="header-cover">
            <div style="padding: 20px 10px; margin-top: -60px; position: relative; background: linear-gradient(to bottom, transparent, rgba(10,14,39,0.9));">
                <h1 onclick="location.reload()">Ù†Ø§ÙˆÙ„Ø³ØªØ§Ù†</h1>
                <p>âœ¨ Ù¾Ø±ÛŒÙ…ÛŒÙ… Ø§Ø±Ø¯Ùˆ Ù¾ÙˆØ±Ù¹Ù„ âœ¨</p>
            </div>
        </header>

        <div class="menu-grid">
            <div class="nav-btn" onclick="openSection('novel')">
                <img src="https://drive.google.com/thumbnail?id=1A6cQPJd5qacANztlmKyU6a5xiKgNAUuz&sz=w400">
                <h3>ğŸ“– Ù†Ø§ÙˆÙ„ Ù¾Ú‘Ú¾ÛŒÚº</h3>
            </div>
            <div class="nav-btn" onclick="openSection('puzzle')">
                <img src="https://drive.google.com/thumbnail?id=11c5Imzwd7sOJ_yEL6gvgDQy85WW0Mvsi&sz=w400">
                <h3>ğŸ® Ù¾Ø²Ù„ Ú¯ÛŒÙ…</h3>
            </div>
        </div>
    </div>

    <div id="content-screen" class="container" style="display:none;">
        <button class="btn-back" onclick="goHome()">ğŸ  ÛÙˆÙ… Ù¾ÛŒØ¬</button>
        <div id="items-list" class="items-grid"></div>
    </div>

    <div id="puzzle-screen" class="container" style="display:none;">
        <button class="btn-back" onclick="goHome()">ğŸ  ÛÙˆÙ… Ù¾ÛŒØ¬</button>
        <div id="puzzle-intro" class="puzzle-section">
            <h2>ğŸ® Ù¾Ø²Ù„ Ú†ÛŒÙ„Ù†Ø¬</h2>
            <p>ÙˆÙ‚Øª: Ø±Ø§Øª <span id="s-time"></span> Ø³Û’ <span id="e-time"></span> Ø¨Ø¬Û’</p>
            <button onclick="startPuzzleEntry()" style="background:var(--accent2); border:none; color:black; padding:12px; width:100%; border-radius:10px; margin-top:10px; cursor:pointer; font-weight:bold;">ğŸ”‘ Ù…ÛŒØ±Û’ Ù¾Ø§Ø³ Ú©ÙˆÚˆ ÛÛ’</button>
        </div>
    </div>

    <script>
        const API_KEY = 'AIzaSyCMppjIJi2_xBi3oLVXN0XjdANMX10xmwE';
        let unlocked = JSON.parse(localStorage.getItem('nov_unlocked')) || [];

        function openSection(mode) {
            document.getElementById('home-screen').style.display = 'none';
            if(mode === 'puzzle') {
                checkPuzzleTime();
            } else {
                document.getElementById('content-screen').style.display = 'block';
                loadFiles(mode);
            }
        }

        function checkPuzzleTime() {
            const hour = new Date().getHours();
            // settings.js Ø³Û’ ÚˆÛŒÙ¹Ø§ Ù„ÛŒØ§ Ø¬Ø§ Ø±ÛØ§ ÛÛ’
            const start = CONFIG.GAME_START;
            const end = CONFIG.GAME_END;

            document.getElementById('s-time').innerText = start;
            document.getElementById('e-time').innerText = end;

            if(hour >= start && hour < end && !CONFIG.MAINTENANCE_MODE) {
                document.getElementById('puzzle-screen').style.display = 'block';
            } else {
                alert(`Ù…Ø¹Ø°Ø±Øª! Ú¯ÛŒÙ… Ú©Ø§ ÙˆÙ‚Øª Ø§Ø¨Ú¾ÛŒ Ù†ÛÛŒÚº ÛÙˆØ§Û” ÛŒÛ Ø±Ø§Øª ${start} Ø³Û’ ${end} Ø¨Ø¬Û’ ØªÚ© Ø§ÙˆÙ¾Ù† ÛÙˆØªÛŒ ÛÛ’Û”`);
                goHome();
            }
        }

        function goHome() { location.reload(); }

        // Ø¨Ø§Ù‚ÛŒ ÙÙ†Ú©Ø´Ù†Ø² (loadFiles, render, etc.) ÛŒÛØ§Úº Ø§Ù¾Ù†ÛŒ Ø¶Ø±ÙˆØ±Øª Ú©Û’ Ù…Ø·Ø§Ø¨Ù‚ Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº...
    </script>
</body>
</html>
